{
  "version": 3,
  "sources": ["../../@radix-ui/react-avatar/dist/packages/react/avatar/src/index.ts", "../../@radix-ui/react-avatar/dist/packages/react/avatar/src/Avatar.tsx"],
  "sourcesContent": ["export {\n  createAvatarScope,\n  //\n  Avatar,\n  AvatarImage,\n  AvatarFallback,\n  //\n  Root,\n  Image,\n  Fallback,\n} from './Avatar';\nexport type { AvatarProps, AvatarImageProps, AvatarFallbackProps } from './Avatar';\n", "import * as React from 'react';\nimport { createContextScope } from '@radix-ui/react-context';\nimport { useCallbackRef } from '@radix-ui/react-use-callback-ref';\nimport { useLayoutEffect } from '@radix-ui/react-use-layout-effect';\nimport { Primitive } from '@radix-ui/react-primitive';\n\nimport type * as Radix from '@radix-ui/react-primitive';\nimport type { Scope } from '@radix-ui/react-context';\n\n/* -------------------------------------------------------------------------------------------------\n * Avatar\n * -----------------------------------------------------------------------------------------------*/\n\nconst AVATAR_NAME = 'Avatar';\n\ntype ScopedProps<P> = P & { __scopeAvatar?: Scope };\nconst [createAvatarContext, createAvatarScope] = createContextScope(AVATAR_NAME);\n\ntype ImageLoadingStatus = 'idle' | 'loading' | 'loaded' | 'error';\n\ntype AvatarContextValue = {\n  imageLoadingStatus: ImageLoadingStatus;\n  onImageLoadingStatusChange(status: ImageLoadingStatus): void;\n};\n\nconst [AvatarProvider, useAvatarContext] = createAvatarContext<AvatarContextValue>(AVATAR_NAME);\n\ntype AvatarElement = React.ElementRef<typeof Primitive.span>;\ntype PrimitiveSpanProps = Radix.ComponentPropsWithoutRef<typeof Primitive.span>;\ninterface AvatarProps extends PrimitiveSpanProps {}\n\nconst Avatar = React.forwardRef<AvatarElement, AvatarProps>(\n  (props: ScopedProps<AvatarProps>, forwardedRef) => {\n    const { __scopeAvatar, ...avatarProps } = props;\n    const [imageLoadingStatus, setImageLoadingStatus] = React.useState<ImageLoadingStatus>('idle');\n    return (\n      <AvatarProvider\n        scope={__scopeAvatar}\n        imageLoadingStatus={imageLoadingStatus}\n        onImageLoadingStatusChange={setImageLoadingStatus}\n      >\n        <Primitive.span {...avatarProps} ref={forwardedRef} />\n      </AvatarProvider>\n    );\n  }\n);\n\nAvatar.displayName = AVATAR_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * AvatarImage\n * -----------------------------------------------------------------------------------------------*/\n\nconst IMAGE_NAME = 'AvatarImage';\n\ntype AvatarImageElement = React.ElementRef<typeof Primitive.img>;\ntype PrimitiveImageProps = Radix.ComponentPropsWithoutRef<typeof Primitive.img>;\ninterface AvatarImageProps extends PrimitiveImageProps {\n  onLoadingStatusChange?: (status: ImageLoadingStatus) => void;\n}\n\nconst AvatarImage = React.forwardRef<AvatarImageElement, AvatarImageProps>(\n  (props: ScopedProps<AvatarImageProps>, forwardedRef) => {\n    const { __scopeAvatar, src, onLoadingStatusChange = () => {}, ...imageProps } = props;\n    const context = useAvatarContext(IMAGE_NAME, __scopeAvatar);\n    const imageLoadingStatus = useImageLoadingStatus(src);\n    const handleLoadingStatusChange = useCallbackRef((status: ImageLoadingStatus) => {\n      onLoadingStatusChange(status);\n      context.onImageLoadingStatusChange(status);\n    });\n\n    useLayoutEffect(() => {\n      if (imageLoadingStatus !== 'idle') {\n        handleLoadingStatusChange(imageLoadingStatus);\n      }\n    }, [imageLoadingStatus, handleLoadingStatusChange]);\n\n    return imageLoadingStatus === 'loaded' ? (\n      <Primitive.img {...imageProps} ref={forwardedRef} src={src} />\n    ) : null;\n  }\n);\n\nAvatarImage.displayName = IMAGE_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * AvatarFallback\n * -----------------------------------------------------------------------------------------------*/\n\nconst FALLBACK_NAME = 'AvatarFallback';\n\ntype AvatarFallbackElement = React.ElementRef<typeof Primitive.span>;\ninterface AvatarFallbackProps extends PrimitiveSpanProps {\n  delayMs?: number;\n}\n\nconst AvatarFallback = React.forwardRef<AvatarFallbackElement, AvatarFallbackProps>(\n  (props: ScopedProps<AvatarFallbackProps>, forwardedRef) => {\n    const { __scopeAvatar, delayMs, ...fallbackProps } = props;\n    const context = useAvatarContext(FALLBACK_NAME, __scopeAvatar);\n    const [canRender, setCanRender] = React.useState(delayMs === undefined);\n\n    React.useEffect(() => {\n      if (delayMs !== undefined) {\n        const timerId = window.setTimeout(() => setCanRender(true), delayMs);\n        return () => window.clearTimeout(timerId);\n      }\n    }, [delayMs]);\n\n    return canRender && context.imageLoadingStatus !== 'loaded' ? (\n      <Primitive.span {...fallbackProps} ref={forwardedRef} />\n    ) : null;\n  }\n);\n\nAvatarFallback.displayName = FALLBACK_NAME;\n\n/* -----------------------------------------------------------------------------------------------*/\n\nfunction useImageLoadingStatus(src?: string) {\n  const [loadingStatus, setLoadingStatus] = React.useState<ImageLoadingStatus>('idle');\n\n  useLayoutEffect(() => {\n    if (!src) {\n      setLoadingStatus('error');\n      return;\n    }\n\n    let isMounted = true;\n    const image = new window.Image();\n\n    const updateStatus = (status: ImageLoadingStatus) => () => {\n      if (!isMounted) return;\n      setLoadingStatus(status);\n    };\n\n    setLoadingStatus('loading');\n    image.onload = updateStatus('loaded');\n    image.onerror = updateStatus('error');\n    image.src = src;\n\n    return () => {\n      isMounted = false;\n    };\n  }, [src]);\n\n  return loadingStatus;\n}\nconst Root = Avatar;\nconst Image = AvatarImage;\nconst Fallback = AvatarFallback;\n\nexport {\n  createAvatarScope,\n  //\n  Avatar,\n  AvatarImage,\n  AvatarFallback,\n  //\n  Root,\n  Image,\n  Fallback,\n};\nexport type { AvatarProps, AvatarImageProps, AvatarFallbackProps };\n"],
  "mappings": "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",
  "names": ["AVATAR_NAME", "createAvatarContext", "createAvatarScope", "createContextScope", "AvatarProvider", "useAvatarContext", "Avatar", "React", "props", "forwardedRef", "avatarProps", "imageLoadingStatus", "setImageLoadingStatus", "$8NyvN$createElement", "__scopeAvatar", "IMAGE_NAME", "AvatarImage", "imageProps", "context", "useImageLoadingStatus", "src", "handleLoadingStatusChange", "useCallbackRef", "status", "onLoadingStatusChange", "onImageLoadingStatusChange", "useLayoutEffect", "FALLBACK_NAME", "AvatarFallback", "fallbackProps", "canRender", "setCanRender", "delayMs", "undefined", "timerId", "window", "setTimeout", "clearTimeout", "loadingStatus", "setLoadingStatus", "isMounted", "image", "Image", "updateStatus", "onload", "onerror", "Root", "Fallback"]
}
